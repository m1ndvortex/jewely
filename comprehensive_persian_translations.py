#!/usr/bin/env python3
"""
Comprehensive Persian translation script for all strings in the django.po file.
This script translates EVERYTHING - admin, tenant, forms, errors, UI elements, etc.
"""

import re

# COMPREHENSIVE Persian translations dictionary
# Organized by category for maintainability
TRANSLATIONS = {
    # ===== NAVIGATION & UI ELEMENTS =====
    "Platform Admin": "مدیریت پلتفرم",
    "Jewelry Shop": "فروشگاه جواهرات",
    "Dashboard": "داشبورد",
    "Tenants": "مستأجران",
    "Subscriptions": "اشتراک‌ها",
    "Monitoring": "نظارت",
    "Audit Logs": "گزارش‌های حسابرسی",
    "More": "بیشتر",
    "POS": "صندوق فروش",
    "Customers": "مشتریان",
    "Accounting": "حسابداری",
    "Repairs": "تعمیرات",
    "Procurement": "خریداری",
    "Branches": "شعب",
    "Reports": "گزارش‌ها",
    "Settings": "تنظیمات",
    "Backups": "پشتیبان‌ها",
    "Security": "امنیت",
    "Feature Flags": "پرچم‌های ویژگی",
    "Announcements": "اعلانیه‌ها",
    "Notifications": "اعلان‌ها",
    "Notification Settings": "تنظیمات اعلان",
    "Profile": "پروفایل",
    "Sign out": "خروج",
    "View notifications": "مشاهده اعلان‌ها",
    "Open user menu": "باز کردن منوی کاربر",
    "Logout": "خروج",
    "Log out": "خروج",
    "Sign Out": "خروج",
    "Sign In": "ورود",
    "Login": "ورود",
    "Register": "ثبت نام",
    "Sign Up": "ثبت نام",
    # ===== ADMIN DASHBOARD =====
    "Admin Dashboard - Platform Management": "داشبورد مدیریت - مدیریت پلتفرم",
    "Platform Admin Dashboard": "داشبورد مدیریت پلتفرم",
    "Monitor platform health, tenant metrics, and system performance": "نظارت بر سلامت پلتفرم، معیارهای مستأجران و عملکرد سیستم",
    "Quick Actions": "اقدامات سریع",
    "Manage Tenants": "مدیریت مستأجران",
    "View and manage all tenants": "مشاهده و مدیریت تمام مستأجران",
    "Create Tenant": "ایجاد مستأجر",
    "Add a new tenant account": "افزودن حساب مستأجر جدید",
    "Coming in Task 20": "در وظیفه 20 می‌آید",
    "Tenant Metrics": "معیارهای مستأجر",
    "Total Tenants": "مجموع مستأجران",
    "Active Tenants": "مستأجران فعال",
    "Suspended": "معلق شده",
    "Pending Deletion": "در انتظار حذف",
    "Requires attention": "نیاز به توجه دارد",
    "Scheduled for removal": "برنامه‌ریزی شده برای حذف",
    "Revenue Metrics": "معیارهای درآمد",
    "Monthly Recurring Revenue (MRR)": "درآمد متکرر ماهانه (MRR)",
    "Annual Recurring Revenue (ARR)": "درآمد متکرر سالانه (ARR)",
    "Churn Rate": "نرخ ریزش",
    "System Health": "سلامت سیستم",
    "System Resources": "منابع سیستم",
    "CPU Usage": "استفاده از CPU",
    "Memory Usage": "استفاده از حافظه",
    "Disk Usage": "استفاده از دیسک",
    "Database Connections": "اتصالات دیتابیس",
    "Recent Errors": "خطاهای اخیر",
    "Tenant Signups (Last 30 Days)": "ثبت‌نام مستأجران (30 روز گذشته)",
    "HEALTHY": "سالم",
    "WARNING": "هشدار",
    "CRITICAL": "بحرانی",
    # ===== TENANT DASHBOARD =====
    "Dashboard - Jewelry Shop": "داشبورد - فروشگاه جواهرات",
    "Welcome back! Here's what's happening with your jewelry shop today.": "خوش آمدید! این اتفاقات امروز در فروشگاه جواهرات شماست.",
    "Refresh": "بارگیری مجدد",
    "Today's Sales": "فروش امروز",
    "This Week": "این هفته",
    "This Month": "این ماه",
    "This Year": "امسال",
    "Inventory Value": "ارزش موجودی",
    "Active Customers": "مشتریان فعال",
    "Pending Orders": "سفارش‌های در انتظار",
    "Low Stock Items": "اقلام کم موجودی",
    "Recent Sales": "فروش‌های اخیر",
    "Top Selling Items": "اقلام پرفروش",
    "Sales Trend": "روند فروش",
    "Revenue": "درآمد",
    "Profit": "سود",
    "Loss": "زیان",
    "Total": "مجموع",
    "Subtotal": "جمع جزء",
    "Tax": "مالیات",
    "Discount": "تخفیف",
    "Grand Total": "جمع کل",
    "Increased": "افزایش یافت",
    "Decreased": "کاهش یافت",
    "by": "به میزان",
    # ===== CUSTOMERS =====
    "Customer": "مشتری",
    "Customer List": "لیست مشتریان",
    "Customer Details": "جزئیات مشتری",
    "Add Customer": "افزودن مشتری",
    "Edit Customer": "ویرایش مشتری",
    "Delete Customer": "حذف مشتری",
    "Customer Name": "نام مشتری",
    "Customer ID": "شناسه مشتری",
    "Phone Number": "شماره تلفن",
    "Email Address": "آدرس ایمیل",
    "Address": "آدرس",
    "City": "شهر",
    "State": "استان",
    "Postal Code": "کد پستی",
    "Country": "کشور",
    "Customer Since": "مشتری از",
    "Loyalty Points": "امتیاز وفاداری",
    "Purchase History": "تاریخچه خرید",
    "Outstanding Balance": "مانده بدهی",
    # ===== PRODUCTS & INVENTORY =====
    "Product": "محصول",
    "Products": "محصولات",
    "Inventory": "موجودی",
    "Stock": "انبار",
    "Item": "مورد",
    "Items": "موارد",
    "SKU": "کد محصول",
    "Barcode": "بارکد",
    "Category": "دسته‌بندی",
    "Categories": "دسته‌بندی‌ها",
    "Description": "توضیحات",
    "Price": "قیمت",
    "Cost": "هزینه",
    "Retail Price": "قیمت خرده‌فروشی",
    "Wholesale Price": "قیمت عمده‌فروشی",
    "Weight": "وزن",
    "Carat": "عیار",
    "Gold": "طلا",
    "Silver": "نقره",
    "Diamond": "الماس",
    "Gemstone": "سنگ قیمتی",
    "Ring": "انگشتر",
    "Necklace": "گردنبند",
    "Bracelet": "دستبند",
    "Earring": "گوشواره",
    "Pendant": "آویز",
    "Chain": "زنجیر",
    "Available": "موجود",
    "Out of Stock": "ناموجود",
    "In Stock": "در انبار",
    "Low Stock": "کم موجودی",
    "Quantity": "تعداد",
    "Unit": "واحد",
    "Reorder Level": "سطح سفارش مجدد",
    # ===== SALES & TRANSACTIONS =====
    "Sale": "فروش",
    "Sales": "فروش‌ها",
    "Transaction": "تراکنش",
    "Transactions": "تراکنش‌ها",
    "Invoice": "فاکتور",
    "Invoices": "فاکتورها",
    "Receipt": "رسید",
    "Order": "سفارش",
    "Orders": "سفارش‌ها",
    "Payment": "پرداخت",
    "Payments": "پرداخت‌ها",
    "Payment Method": "روش پرداخت",
    "Cash": "نقدی",
    "Credit Card": "کارت اعتباری",
    "Debit Card": "کارت بانکی",
    "Bank Transfer": "انتقال بانکی",
    "Check": "چک",
    "Online Payment": "پرداخت آنلاین",
    "Paid": "پرداخت شده",
    "Unpaid": "پرداخت نشده",
    "Partial Payment": "پرداخت جزئی",
    "Refund": "بازپرداخت",
    "Exchange": "تعویض",
    "Return": "بازگشت",
    "Sale Date": "تاریخ فروش",
    "Due Date": "تاریخ سررسید",
    "Payment Date": "تاریخ پرداخت",
    # ===== STATUS =====
    "Status": "وضعیت",
    "Active": "فعال",
    "Inactive": "غیرفعال",
    "Completed": "تکمیل شد",
    "Pending": "در انتظار",
    "Cancelled": "لغو شد",
    "Processing": "در حال پردازش",
    "Approved": "تأیید شده",
    "Rejected": "رد شده",
    "Draft": "پیش‌نویس",
    "Published": "منتشر شده",
    "Scheduled": "زمان‌بندی شده",
    "On Hold": "معلق",
    "Delivered": "تحویل داده شده",
    "Shipped": "ارسال شده",
    "Ready": "آماده",
    "Failed": "ناموفق",
    "Success": "موفق",
    "Error": "خطا",
    "Enabled": "فعال",
    "Disabled": "غیرفعال",
    # ===== FORMS & VALIDATION =====
    "Name": "نام",
    "First Name": "نام",
    "Last Name": "نام خانوادگی",
    "Full Name": "نام کامل",
    "Username": "نام کاربری",
    "Email": "ایمیل",
    "Password": "رمز عبور",
    "Confirm Password": "تأیید رمز عبور",
    "Current Password": "رمز عبور فعلی",
    "New Password": "رمز عبور جدید",
    "Phone": "تلفن",
    "Mobile": "موبایل",
    "Date": "تاریخ",
    "Time": "زمان",
    "Notes": "یادداشت‌ها",
    "Comments": "نظرات",
    "Attachments": "پیوست‌ها",
    "Upload": "بارگذاری",
    "Download": "دانلود",
    "File": "فایل",
    "Image": "تصویر",
    "This field is required.": "این فیلد الزامی است.",
    "Please enter a valid email address.": "لطفاً یک آدرس ایمیل معتبر وارد کنید.",
    "Please enter a valid phone number.": "لطفاً یک شماره تلفن معتبر وارد کنید.",
    "Passwords do not match.": "رمزهای عبور مطابقت ندارند.",
    "Password is too short.": "رمز عبور خیلی کوتاه است.",
    "Password is too common.": "رمز عبور خیلی ساده است.",
    "This username is already taken.": "این نام کاربری قبلاً استفاده شده است.",
    "This email is already registered.": "این ایمیل قبلاً ثبت شده است.",
    "Invalid format.": "فرمت نامعتبر است.",
    "Value must be positive.": "مقدار باید مثبت باشد.",
    "Value is too large.": "مقدار خیلی بزرگ است.",
    "Value is too small.": "مقدار خیلی کوچک است.",
    # ===== ERRORS & MESSAGES =====
    "Insufficient stock available.": "موجودی کافی نیست.",
    "Invalid username or password.": "نام کاربری یا رمز عبور نامعتبر است.",
    "You do not have permission to perform this action.": "شما اجازه انجام این عمل را ندارید.",
    "The requested item was not found.": "مورد درخواستی یافت نشد.",
    "An item with this information already exists.": "موردی با این اطلاعات قبلاً وجود دارد.",
    "Item created successfully.": "مورد با موفقیت ایجاد شد.",
    "Item updated successfully.": "مورد با موفقیت به‌روزرسانی شد.",
    "Item deleted successfully.": "مورد با موفقیت حذف شد.",
    "Sale completed successfully.": "فروش با موفقیت تکمیل شد.",
    "Customer added successfully.": "مشتری با موفقیت اضافه شد.",
    "Email sent successfully.": "ایمیل با موفقیت ارسال شد.",
    "Settings saved successfully.": "تنظیمات با موفقیت ذخیره شد.",
    "Changes saved.": "تغییرات ذخیره شد.",
    "Operation cancelled.": "عملیات لغو شد.",
    "Please try again.": "لطفاً دوباره تلاش کنید.",
    "Something went wrong.": "مشکلی پیش آمد.",
    "An error occurred.": "خطایی رخ داد.",
    "Connection failed.": "اتصال ناموفق بود.",
    "Timeout error.": "خطای زمان.",
    "Permission denied.": "دسترسی رد شد.",
    "Access denied.": "دسترسی رد شد.",
    "Not found.": "یافت نشد.",
    "Page not found.": "صفحه یافت نشد.",
    "Server error.": "خطای سرور.",
    # ===== CONFIRMATION MESSAGES =====
    "Are you sure?": "آیا مطمئن هستید؟",
    "Are you sure you want to delete this item?": "آیا مطمئن هستید که می‌خواهید این مورد را حذف کنید؟",
    "Are you sure you want to delete this customer?": "آیا مطمئن هستید که می‌خواهید این مشتری را حذف کنید؟",
    "Are you sure you want to cancel this sale?": "آیا مطمئن هستید که می‌خواهید این فروش را لغو کنید؟",
    "Are you sure you want to log out?": "آیا مطمئن هستید که می‌خواهید خارج شوید؟",
    "This action cannot be undone.": "این عمل قابل بازگشت نیست.",
    "Please confirm your action.": "لطفاً عمل خود را تأیید کنید.",
    "Confirm": "تأیید",
    "Cancel": "لغو",
    "OK": "تأیید",
    "Yes": "بله",
    "No": "خیر",
    # ===== AUTHENTICATION =====
    "Platform Admin Login": "ورود مدیر پلتفرم",
    "Tenant Login": "ورود مستأجر",
    "Please use your admin credentials to access this area.": "لطفاً از اعتبارنامه مدیریتی خود برای دسترسی به این بخش استفاده کنید.",
    "Username and password are required.": "نام کاربری و رمز عبور الزامی است.",
    "Access denied. This login is for platform administrators only.": "دسترسی رد شد. این ورود فقط برای مدیران پلتفرم است.",
    "This account has been disabled.": "این حساب غیرفعال شده است.",
    "Invalid username or password. Please try again.": "نام کاربری یا رمز عبور نامعتبر است. لطفاً دوباره تلاش کنید.",
    "You have been successfully logged out.": "شما با موفقیت خارج شدید.",
    "Remember me": "مرا به خاطر بسپار",
    "Forgot password?": "رمز عبور را فراموش کرده‌اید؟",
    "Reset Password": "بازنشانی رمز عبور",
    "Change Password": "تغییر رمز عبور",
    "Account Settings": "تنظیمات حساب",
    # ===== IMPERSONATION =====
    "Stop Impersonating": "توقف انتحال هویت",
    "Impersonating": "در حال انتحال هویت",
    "You are viewing this account as a platform administrator. All actions are logged.": "شما این حساب را به عنوان مدیر پلتفرم مشاهده می‌کنید. تمام اقدامات ثبت می‌شود.",
    # ===== ACTIONS =====
    "Add": "افزودن",
    "Create": "ایجاد",
    "New": "جدید",
    "Edit": "ویرایش",
    "Update": "به‌روزرسانی",
    "Delete": "حذف",
    "Remove": "حذف",
    "Save": "ذخیره",
    "Submit": "ثبت",
    "Apply": "اعمال",
    "Clear": "پاک کردن",
    "Reset": "بازنشانی",
    "Search": "جستجو",
    "Filter": "فیلتر",
    "Sort": "مرتب‌سازی",
    "Export": "خروجی",
    "Import": "ورودی",
    "Print": "چاپ",
    "Send": "ارسال",
    "View": "مشاهده",
    "Details": "جزئیات",
    "Close": "بستن",
    "Back": "بازگشت",
    "Next": "بعدی",
    "Previous": "قبلی",
    "Continue": "ادامه",
    "Finish": "پایان",
    "Select": "انتخاب",
    "Choose": "انتخاب کنید",
    "Browse": "مرور",
    "Copy": "کپی",
    "Duplicate": "تکثیر",
    "Share": "اشتراک‌گذاری",
    # ===== TIME & DATE =====
    "Today": "امروز",
    "Yesterday": "دیروز",
    "Tomorrow": "فردا",
    "Week": "هفته",
    "Month": "ماه",
    "Year": "سال",
    "Hour": "ساعت",
    "Minute": "دقیقه",
    "Second": "ثانیه",
    "January": "ژانویه",
    "February": "فوریه",
    "March": "مارس",
    "April": "آوریل",
    "May": "می",
    "June": "ژوئن",
    "July": "جولای",
    "August": "اوت",
    "September": "سپتامبر",
    "October": "اکتبر",
    "November": "نوامبر",
    "December": "دسامبر",
    "Monday": "دوشنبه",
    "Tuesday": "سه‌شنبه",
    "Wednesday": "چهارشنبه",
    "Thursday": "پنج‌شنبه",
    "Friday": "جمعه",
    "Saturday": "شنبه",
    "Sunday": "یکشنبه",
    # ===== COMMON PHRASES =====
    "Welcome": "خوش آمدید",
    "Welcome back": "خوش آمدید",
    "Welcome back, %(name)s!": "خوش آمدید، %(name)s!",
    "Hello": "سلام",
    "Goodbye": "خداحافظ",
    "Thank you": "متشکرم",
    "Please": "لطفاً",
    "Loading...": "در حال بارگیری...",
    "Processing...": "در حال پردازش...",
    "Saving...": "در حال ذخیره...",
    "Please wait...": "لطفاً صبر کنید...",
    "No results found.": "نتیجه‌ای یافت نشد.",
    "No data available.": "داده‌ای در دسترس نیست.",
    "Show more": "نمایش بیشتر",
    "Show less": "نمایش کمتر",
    "Expand": "گسترش",
    "Collapse": "جمع کردن",
    "All": "همه",
    "None": "هیچ‌کدام",
    "Other": "سایر",
    "Unknown": "نامشخص",
    "N/A": "ندارد",
    "Optional": "اختیاری",
    "Required": "الزامی",
    "Recommended": "توصیه شده",
    "Default": "پیش‌فرض",
    "Custom": "سفارشی",
    # ===== REPAIRS =====
    "Repair": "تعمیر",
    "Repair Status": "وضعیت تعمیر",
    "Repair Type": "نوع تعمیر",
    "Repair Cost": "هزینه تعمیر",
    "Repair Date": "تاریخ تعمیر",
    "Estimated Completion": "تخمین اتمام",
    "Cleaning": "تمیزکاری",
    "Resizing": "تغییر سایز",
    "Stone Setting": "نگین‌کاری",
    "Polishing": "جلادهی",
    "Engraving": "حکاکی",
    # ===== REPORTS =====
    "Report": "گزارش",
    "Generate Report": "ایجاد گزارش",
    "Report Type": "نوع گزارش",
    "Date Range": "بازه زمانی",
    "From Date": "از تاریخ",
    "To Date": "تا تاریخ",
    "Sales Report": "گزارش فروش",
    "Inventory Report": "گزارش موجودی",
    "Customer Report": "گزارش مشتری",
    "Financial Report": "گزارش مالی",
    "Summary": "خلاصه",
    "Detailed": "تفصیلی",
    # ===== MISC =====
    "Version": "نسخه",
    "Help": "راهنما",
    "Support": "پشتیبانی",
    "Documentation": "مستندات",
    "FAQ": "سوالات متداول",
    "Contact": "تماس",
    "About": "درباره",
    "Terms": "شرایط",
    "Privacy": "حریم خصوصی",
    "Language": "زبان",
    "Theme": "تم",
    "Light": "روشن",
    "Dark": "تاریک",
    "Auto": "خودکار",
    # ===== PLURALS & VARIABLES =====
    "%(start)s to %(end)s": "%(start)s تا %(end)s",
    "%(amount)s %(currency)s": "%(amount)s %(currency)s",
    "%(count)s items": "%(count)s مورد",
    "%(count)s customers": "%(count)s مشتری",
}


def update_po_file_comprehensive(filepath):
    """Update the .po file with ALL Persian translations."""
    print("Reading {}...".format(filepath))
    with open(filepath, "r", encoding="utf-8") as f:
        content = f.read()

    original_content = content
    translated_count = 0

    print("\nTranslating strings...\n")

    for english, persian in TRANSLATIONS.items():
        # Escape special characters for regex
        escaped_english = re.escape(english)

        # Pattern to match msgid followed by empty msgstr
        pattern = rf'(msgid "{escaped_english}"\nmsgstr ")(")'

        # Replace empty msgstr with Persian translation
        new_content, count = re.subn(pattern, rf"\1{persian}\2", content)

        if count > 0:
            content = new_content
            translated_count += count
            print("✓ {:60s} → {:40s}".format(english[:60], persian[:40]))

    # Write updated content only if changes were made
    if content != original_content:
        print("\nWriting updated translations to {}...".format(filepath))
        with open(filepath, "w", encoding="utf-8") as f:
            f.write(content)
        print("\n✅ Successfully added {} Persian translations!".format(translated_count))
    else:
        print("\n⚠️  No new translations were added (all strings may already be translated)")

    # Count remaining untranslated strings
    remaining = len(re.findall(r'msgid "([^"]+)"\nmsgstr ""', content))
    print("\n📊 Translation Statistics:")
    print("   - Translated in this run: {}".format(translated_count))
    print("   - Remaining untranslated: {}".format(remaining))
    print("   - Total strings in dictionary: {}".format(len(TRANSLATIONS)))

    return translated_count


if __name__ == "__main__":
    po_file = "locale/fa/LC_MESSAGES/django.po"
    print("=" * 80)
    print("COMPREHENSIVE PERSIAN TRANSLATION SCRIPT")
    print("=" * 80)
    update_po_file_comprehensive(po_file)
    print("\n✅ Translation complete!")
    print("Next step: Run 'docker compose exec web python manage.py compilemessages -l fa'")
    print("=" * 80)

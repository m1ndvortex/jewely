# Cache Control and ETag Configuration
# Optimizes static asset delivery with proper caching headers
# Requirement 22: Nginx Configuration - Set cache headers and generate ETags

# Enable ETags for cache validation
# ETags allow browsers to validate cached content without re-downloading
# Nginx generates ETags based on file modification time and size
etag on;

# If-Modified-Since header handling
# Allows conditional requests based on Last-Modified header
if_modified_since before;

# Open file cache for improved performance
# Caches file descriptors, sizes, and modification times
open_file_cache max=10000 inactive=30s;
open_file_cache_valid 60s;
open_file_cache_min_uses 2;
open_file_cache_errors on;

# Cache configuration for different file types
# The $expires_map variable is defined in nginx.conf (http context)
# Use: expires $expires_map; in location blocks

# Cache-Control header directives
# public: Can be cached by any cache (browser, CDN, proxy)
# private: Can only be cached by browser
# no-cache: Must revalidate with server before using cached version
# no-store: Must not be cached at all
# immutable: Content will never change (use with versioned assets)
# max-age: Maximum time to cache in seconds
# s-maxage: Maximum time for shared caches (CDN, proxy)
